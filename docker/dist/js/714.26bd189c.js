"use strict";(self["webpackChunkmangosale"]=self["webpackChunkmangosale"]||[]).push([[714],{47714:function(t,e,s){s.r(e),s.d(e,{default:function(){return m}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"createLock"},[e("h1",[t._v("Lock")]),e("div",{staticClass:"panel-box"},[e("div",{staticClass:"title"},[t._v(" Create Lock ")]),e("div",{staticClass:"input-box"},[e("div",{staticClass:"name"},[t._v(" Token Address ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.token,expression:"token"}],attrs:{type:"text"},domProps:{value:t.token},on:{input:function(e){e.target.composing||(t.token=e.target.value)}}})]),e("div",{staticClass:"info-list"},[e("div",{staticClass:"row"},[e("div",{staticClass:"name"},[t._v(" Token Name ")]),e("div",{staticClass:"value"},[t._v(" "+t._s(t.coinInfo.name)+" ")])]),e("div",{staticClass:"row"},[e("div",{staticClass:"name"},[t._v(" Symbol ")]),e("div",{staticClass:"value"},[t._v(" "+t._s(t.coinInfo.symbol)+" ")])]),e("div",{staticClass:"row"},[e("div",{staticClass:"name"},[t._v(" Decimal ")]),e("div",{staticClass:"value"},[t._v(" "+t._s(t.coinInfo.decimals)+" ")])]),e("div",{staticClass:"row"},[e("div",{staticClass:"name"},[t._v(" Balance ")]),e("div",{staticClass:"value"},[t._v(" "+t._s(t.coinInfo.balance)+" ")])])])]),e("div",{staticClass:"panel-box"},[e("div",{staticClass:"input-box"},[e("div",{staticClass:"name"},[t._v(" Amounts ")]),e("div",{staticClass:"input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.lockParams.amount,expression:"lockParams.amount"}],attrs:{type:"number",placeholder:"Amounts"},domProps:{value:t.lockParams.amount},on:{input:function(e){e.target.composing||t.$set(t.lockParams,"amount",e.target.value)}}}),e("div",{staticClass:"mangobox-button"},[t._v(" MAX ")])])]),e("div",{staticClass:"time-box"},[e("div",{staticClass:"name"},[t._v(" End Date ( UTC Time ) ")]),e("el-date-picker",{staticClass:"pickerDate",attrs:{type:"datetime",placeholder:"Choose Date"},model:{value:t.pickerDate,callback:function(e){t.pickerDate=e},expression:"pickerDate"}})],1)]),e("div",{staticClass:"mangobox-button",on:{click:t.approve}},[t._v(" Approve ")]),e("div",{staticClass:"mangobox-button",on:{click:t.createLock}},[t._v(" CREAT ")])])},i=[],o=(s(57658),s(78863)),n={name:"createLock",data(){return{pickerDate:new Date,token:void 0,endDate:{},coinInfo:{},lockParams:{contract:"",amount:void 0,end_time:void 0}}},computed:{account(){return this.$store.state.app.account}},watch:{token(t){this.getCoinInfo(t.trim())},account(){this.getCoinInfo(this.token.trim())}},methods:{async getCoinInfo(t){if(t.length>40){let e=await this.$store.dispatch("erc20/queryInfo",t),s=await this.$store.dispatch("erc20/balanceOf",{address:t,owner:this.$store.state.app.account});this.coinInfo={...e,balance:s}}},approve(){this.$store.state.app.account?this.token?this.$store.dispatch("erc20/approve",{spender:o.Z.mangoLock.address,value:"100000000000000000000000000",address:this.token.trim()}):this.$eventBus.$emit("message",{message:"Please input token  ",type:"error"}):this.$eventBus.$emit("message",{message:"Please connect  ",type:"error"})},async createLock(){this.$store.state.app.account?this.token?this.pickerDate?(this.lockParams.contract=this.token.trim(),this.lockParams.version=7,this.lockParams.end_time=new Date(this.pickerDate).getTime(),this.lockParams.owner=this.$store.state.app.account,await this.$store.dispatch("mangoLock/lock",this.lockParams),this.$router.push("Lock")):this.$eventBus.$emit("message",{message:"Please picker date ",type:"error"}):this.$eventBus.$emit("message",{message:"Please input token  ",type:"error"}):this.$eventBus.$emit("message",{message:"Please connect  ",type:"error"})}}},c=n,r=s(1001),l=(0,r.Z)(c,a,i,!1,null,"94c7d5c4",null),m=l.exports}}]);
//# sourceMappingURL=714.26bd189c.js.map